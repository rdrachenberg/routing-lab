!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Sammy("#container",(function(){this.use("Handlebars","hbs");var e=null!==window.sessionStorage.getItem("loggedIn"),t=function(){function t(){n(this,t)}return i(t,[{key:"handleHome",value:function(t){t.loggedIn=e,t.load("./views/header.hbs").then((function(e){t.partials={header:e};fetch("https://baas.kinvey.com/appdata/kid_B1FtXe9zD/furniture",{headers:{"Content-Type":"application/json",Authorization:"Basic Z3Vlc3Q6Z3Vlc3Q="}}).then((function(e){console.log(e.ok),e.ok?e.json().then((function(e){console.log(e);var n=e;t.hasFurniture=n.length>0,t.furnitureItem=n,t.partial("./views/home.hbs")})):(console.log("ERROR! "+e.status),console.log(e))}))}))}},{key:"handleDetails",value:function(t){var n="https://baas.kinvey.com/appdata/kid_B1FtXe9zD/furniture/"+t.params.id;console.log(n);fetch(n,{headers:{"Content-Type":"application/json",Authorization:"Basic Z3Vlc3Q6Z3Vlc3Q="}}).then((function(n){console.log(n.ok),n.ok?n.json().then((function(n){console.log(n);var o=n;t.loggedIn=e,t.load("./views/header.hbs").then((function(e){t.partials={header:e},t.details=o,t.partial("./views/details.hbs")}))})):(console.log("ERROR! "+n.status),console.log(n))}))}},{key:"handleProfile",value:function(t){t.loggedIn=e;var n={headers:{"Content-Type":"application/json",Authorization:"Kinvey "+window.sessionStorage.getItem("loggedIn")}};fetch("https://baas.kinvey.com/appdata/kid_B1FtXe9zD/furniture",n).then((function(e){console.log(e.ok),e.ok?e.json().then((function(e){console.log(e);var n=e.filter((function(e){return e._acl.creator==window.sessionStorage.getItem("user")}));t.hasFurniture=n.length>0,t.load("./views/header.hbs").then((function(e){t.partials={header:e},t.myFurnature=n,t.partial("./views/profile.hbs")}))})):(console.log("ERROR! "+e.status),console.log(e))}))}},{key:"handleCreate",value:function(t){t.loggedIn=e,t.load("./views/header.hbs").then((function(e){t.partials={header:e},t.partial("./views/create.hbs")}))}},{key:"handleLogin",value:function(t){t.loggedIn=e,t.load("./views/header.hbs").then((function(e){t.partials={header:e},t.partial("./views/login.hbs")}))}}]),t}(),o=function(){function t(){n(this,t)}return i(t,[{key:"deleteItem",value:function(e){var t=this;console.log("deleted Furnature!"),console.log(e.params.id);var n=e.params.id;url="https://baas.kinvey.com/appdata/kid_B1FtXe9zD/furniture/".concat(n);var o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Kinvey "+window.sessionStorage.getItem("loggedIn")}};fetch(url,o).then((function(e){console.log(e),e.ok?e.json().then((function(e){console.log(e),t.redirect("#/furniture/mine")})):console.log("ERROR: "+e.status)})),this.redirect("#/furniture/mine"),console.log(res)}},{key:"addItem",value:function(e){var t=this,n=e.params;console.log("Item Added!");var o,i=n.make,a=n.model,r=n.year,s=n.description,l=n.price,d=n.img,u=n.material,c=i.length>=4,g=a.length>=4,h=r>=1950&&r<=2050,f=s.length>10,p=l>0,m=(o=d,!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(o)),v=!0;if(""!=u&&(v=u.length<=20),c&g&h&f&p&m&v){var y={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Kinvey "+window.sessionStorage.getItem("loggedIn")},body:JSON.stringify({make:i,model:a,year:r,description:s,price:l,img:d,material:u})};fetch("https://baas.kinvey.com/appdata/kid_B1FtXe9zD/furniture",y).then((function(e){201==e.status?(console.log("added successfully!"),t.redirect("#/furniture/mine")):document.getElementById("errorBox").style.display="block"}))}else document.getElementById("errorBox").style.display="block",c||document.getElementById("new-make").classList.add("is-invalid"),g||document.getElementById("new-model").classList.add("is-invalid"),h||document.getElementById("new-year").classList.add("is-invalid"),f||document.getElementById("new-description").classList.add("is-invalid"),p||document.getElementById("new-price").classList.add("is-invalid"),m||document.getElementById("new-image").classList.add("is-invalid"),v||document.getElementById("new-material").classList.add("is-invalid")}},{key:"login",value:function(t){var n=this,o=t.params;console.log("logged in");var i=o.email,a=o.password,r="https://baas.kinvey.com/user/kid_B1FtXe9zD/login";console.log(r);var s=btoa("".concat(i,":").concat(a));console.log(s);var l={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+s},body:JSON.stringify({username:i,password:a})};fetch(r,l).then((function(t){t.json().then((function(t){console.log(t),window.sessionStorage.setItem("user",t._id),window.sessionStorage.setItem("loggedIn",t._kmd.authtoken),e=!0,n.redirect("#/furniture/mine")}))}))}},{key:"logout",value:function(t){var n=this;console.log("logged out");var o="https://baas.kinvey.com/user/kid_B1FtXe9zD/_logout";console.log(o);var i=window.sessionStorage.getItem("loggedIn");console.log(i),fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Kinvey "+i}}).then((function(t){console.log(t),window.sessionStorage.clear(),e=!1,n.redirect("#/")}))}}]),t}(),a=new t,r=new o;this.get("#/",a.handleHome),this.get("#/furniture/details/:id",a.handleDetails),this.get("#/furniture/mine",a.handleProfile),this.get("#/furniture/delete/:id",r.deleteItem),this.get("#/furniture/create",a.handleCreate),this.post("#/furniture/create",r.addItem),this.get("#/login",a.handleLogin),this.post("#/login",r.login),this.get("#/logout",r.logout)})).run("#/")}]);